import{d as g,r as m,c as O,w as M,T as D,o as r,a as l,b as s,e as y,f as h,g as T,t as c,n as A,h as F,i as z,j as B,W as L,C as U,m as W,F as I,k as P,l as j,p as V,q}from"./vendor.754b5d5c.js";const G=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}};G();const K={MAIN:{chainId:1,name:"Mainnet"},RINKEBY:{chainId:4,name:"Rinkeby",params:{chainId:`0x${4 .toString(16)}`,nativeCurrency:{name:"Ethereum",symbol:"ETH",decimals:18},rpcUrl:["https://rinkeby.arbitrum.io/rpc"],blockExplorerUrls:["https://rinkeby.etherscan.com/"]}},LOCALHOST:{chainId:[31337,1337],name:"Localhost",params:{chainId:`0x${1337 .toString(16)}`,nativeCurrency:{name:"Ethereum",symbol:"ETH",decimals:18},rpcUrl:["https://rinkeby.arbitrum.io/rpc"],blockExplorerUrls:["https://rinkeby.etherscan.com/"]}}},R={REJECTED_BY_USER:4001,PENDING:-32002},f={MISSING_METAMASK:"Metamask is required.",TRANSACTION_FAILED:"The transaction has failed.",TRANSACTION_REJECTED_BY_USER:"Transaction rejected.",TRANSACTION_WAITING_FOR_APPOVAL:"Transaction waiting for aproval.",INVALID_NETWORK:"Invalid network",DEFAULT:"An error has happended."},J={TRANSACTION_COMPLETED:"Transaction completed."};var d;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING"})(d||(d={}));var w=(e,t)=>{for(const[n,o]of t)e[n]=o;return e};const Y=g({name:"Alert",data:()=>({show:!1,message:null,timeout:null,type:d.ERROR}),computed:{showError(){return this.type===d.ERROR},alertClasses(){return{"bg-red-500":this.type===d.ERROR,"bg-yellow-500":this.type===d.WARNING,"bg-green-500":this.type===d.SUCCESS}}},methods:{showAlert(e,t=d.ERROR){clearTimeout(this.timeout),this.message=e,this.type=t,this.show=!0,this.timeout=setTimeout(this.hideAlert,5e3)},hideAlert(){clearTimeout(this.timeout),this.show=!1,this.type=d.ERROR,this.message=null}}}),H={class:"text-xl inline-block mr-2 sm:mr-5 align-middle"},Q={class:"inline-block align-middle mr-4 sm:mr-8 text-sm sm:text-base overflow-ellipsis overflow-hidden flex-1"},X={key:0,class:"capitalize hidden sm:inline"},Z=s("span",null,"\xD7",-1),ee=[Z];function te(e,t,n,o,a,i){const p=m("font-awesome-icon");return r(),O(D,{name:"fade"},{default:M(()=>[e.show?(r(),l("div",{key:0,class:A(["flex flex-row items-center text-white px-3 sm:px-6 py-4 border-0 fixed bottom-0 left-0 right-0 z-50 m-1 sm:mb-4 sm:ml-2 sm:mr-2 rounded",e.alertClasses])},[s("span",H,[y(p,{icon:"bell"})]),s("span",Q,[e.showError?(r(),l("b",X,"Error:")):h("",!0),T(" "+c(e.message),1)]),s("button",{class:"bg-transparent text-2xl font-semibold leading-none mr-1 sm:mr-3 p-1 outline-none focus:outline-none pointer overflow-ellipsis overflow-hidden",onClick:t[0]||(t[0]=(...v)=>e.hideAlert&&e.hideAlert(...v))},ee)],2)):h("",!0)]),_:1})}var ne=w(Y,[["render",te]]);const se=g({name:"Nav",props:{network:{type:Object,default:()=>({})},address:{type:String,default:void 0},appReady:{type:Boolean,default:!1},validNetwork:{type:Boolean,default:!1},expectedNetwork:{type:Object,required:!0}}}),ae={class:"w-full py-3 md:py-4 px-3 md:px-4 shadow-md border flex justify-between text-sm"},ie={key:0,class:"bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded shadow hover:shadow-md font-semibold max-w-xs mr-1 capitalize text-white"},re={key:2,class:"bg-green-500 hover:bg-green-600 px-4 py-2 rounded shadow hover:shadow-md font-semibold overflow-ellipsis overflow-hidden max-w-xs ml-1 text-white shadow-inner"};function oe(e,t,n,o,a,i){return r(),l("nav",ae,[e.validNetwork?(r(),l("div",ie,c(e.network.name),1)):(r(),l("button",{key:1,type:"button",class:"bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded shadow hover:shadow-md font-semibold max-w-xs mr-1 capitalize text-white shadow-inner",onClick:t[0]||(t[0]=p=>e.$emit("switch-chain"))}," Change To "+c(e.expectedNetwork.name),1)),e.address?(r(),l("div",re,c(e.address),1)):e.appReady?(r(),l("button",{key:3,type:"button",class:"bg-green-500 hover:bg-green-600 px-4 py-2 rounded shadow hover:shadow-md font-semibold overflow-ellipsis overflow-hidden max-w-xs ml-1 text-white shadow-inner",onClick:t[1]||(t[1]=p=>e.$emit("connect-wallet"))}," Connect Wallet ")):h("",!0)])}var le=w(se,[["render",oe]]);const de={},pe={class:"w-full border-t bg-white flex justify-center py-4 shadow-lg text-gray-600"},ce=T(" You can find the source code\xA0 "),ue=s("a",{class:"underline block",href:"https://github.com/nicobevilacqua/AwesomeCapybaraNFTCollection"},"here",-1),me=[ce,ue];function ye(e,t){return r(),l("footer",pe,me)}var he=w(de,[["render",ye]]);const fe=g({name:"ProgressBar",props:{running:{type:Boolean,default:!1}},data:()=>({progress:0,interval:null}),watch:{running(){if(!this.running){clearInterval(this.interval),this.progress=0;return}this.progress=10,this.interval=setInterval(()=>{this.progress+10>=100||(this.progress=this.progress+10)},1500)}}}),we={key:0,id:"progress-bar",class:"overflow-hidden h-1 text-xs flex bg-red-200 animate-pulse"};function ge(e,t,n,o,a,i){return e.progress>0&&e.progress<100?(r(),l("div",we,[s("div",{id:"current-progress",style:F({width:`${e.progress}%`}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-red-500 transition-all transition-slowest ease"},null,4)])):h("",!0)}var be=w(fe,[["render",ge]]);const ve=[{inputs:[{internalType:"string",name:"_contractName",type:"string"},{internalType:"string",name:"_contractDescription",type:"string"},{internalType:"string",name:"_contractImage",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"title",type:"string"},{indexed:!1,internalType:"string",name:"description",type:"string"},{indexed:!1,internalType:"string",name:"image",type:"string"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"ItemAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"uint256",name:"token",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"TokenMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"image",type:"string"}],name:"addItemToCollection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"availableItemsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"collectionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokensData",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"image",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],x="0x37888ca4bd1Ff89538778b30b85F58FDEBfB69CA",{ethereum:u}=window;let k;function N(){return k||(k=new L(u,"any")),k}let b;function C(){if(!b){const t=N().getSigner();b=new U(x,ve,t)}return b}function _(e){const{code:t,error:n,data:o}=e;return t===R.REJECTED_BY_USER?f.TRANSACTION_REJECTED_BY_USER:t===R.PENDING?f.TRANSACTION_WAITING_FOR_APPOVAL:n?n.message:o?o.message:(console.error(e),f.TRANSACTION_FAILED)}const Te=g({name:"App",components:{Alert:ne,Nav:le,ProgressBar:be,Footer:he},data:()=>({metamaskDetected:!1,network:void 0,expectedNetwork:K.RINKEBY,collectionSize:null,availableItemsLength:null,address:null,transactionRunning:null,claiming:!1,token:null}),computed:{collectionUrl(){return"https://testnets.opensea.io/collection/awesome-capybara-nft-collection"},validNetwork(){return this.network?Array.isArray(this.expectedNetwork.chainId)?this.expectedNetwork.chainId.includes(this.network.chainId):this.expectedNetwork.chainId===this.network.chainId:!1},appReady(){return this.metamaskDetected&&this.validNetwork}},async mounted(){if(this.metamaskDetected=!!await z(),!this.metamaskDetected){this.showAlert(f.MISSING_METAMASK);return}this.network=B(parseInt(u.networkVersion,10)),this.initEvents(),!!this.validNetwork&&(await this.checkIfWalletIsConnected(),await this.initializeData())},methods:{async initializeData(){!this.address||await this.getCollectionData()},showAlert(...e){!this.$refs.alert||this.$refs.alert.showAlert(...e)},hideAlert(){this.$refs.alert.hideAlert()},async checkIfWalletIsConnected(){if(!this.appReady)return;const[e]=await u.request({method:"eth_accounts"});this.address=e},async switchToValidChain(){try{await u.request({method:"wallet_switchEthereumChain",params:[{chainId:this.expectedNetwork.params.chainId}]})}catch(e){if(e.code===4902)try{await u.request({method:"wallet_addEthereumChain",params:[this.expectedNetwork.params]})}catch(n){const o=_(n);this.showAlert(o,d.ERROR)}const t=_(e);this.showAlert(t,d.ERROR)}},async getCollectionData(){const e=C(),[t,n]=await Promise.all([e.availableItemsLength(),e.collectionSize()]);this.availableItemsLength=parseInt(t,10),this.collectionSize=parseInt(n,10)},async doTransaction(e){if(!this.transactionRunning){this.hideAlert();try{const t=await e;this.transactionRunning=t.hash;const n=await t.wait();return n.status===0?this.showAlert(f.TRANSACTION_FAILED,d.ERROR):this.showAlert(J.TRANSACTION_COMPLETED,d.SUCCESS),n}catch(t){const n=_(t);this.showAlert(n,d.ERROR)}finally{this.transactionRunning=null}}},async connectWallet(){if(!this.appReady)return;const[e]=await u.request({method:"eth_requestAccounts"});this.address=e,this.initializeData()},async getTokenData(e){let n=(await b.tokenURI(e)).replace("data:application/json;base64,","");n=JSON.parse(atob(n)),n.openSeaUrl=`https://testnets.opensea.io/assets/${x}/${e}`,n.id=e,this.token=n},async claim(){this.claiming=!0;const t=C().mintNFT(),n=await this.doTransaction(t);if(n){const[o,a]=n.events.find(i=>i.event==="TokenMinted").args;await this.getTokenData(a)}this.initializeData(),this.claiming=!1},initEvents(){if(!this.metamaskDetected)return;u.on("accountsChanged",([t])=>{this.address=t,!!t&&this.initializeData()}),N().on("network",t=>{if(this.network=t,!this.validNetwork){this.showAlert("You should change to Rinkeby");return}this.initializeData()})}}}),ke={class:"flex flex-col bg-gray-50 justify-stretch h-screen"},_e={class:"w-full flex flex-col py-6 px-3 md:px-0 md:py-12 flex-grow items-center text-gray-600 flex-grow"},Ae=s("h1",{class:"text-2xl md:text-3xl text-center font-semibold mb-3"}," Awesome Capybara NFT Collection ",-1),Ie={class:"font-semibold mb-6"},Re={key:0,class:"max-w-sm rounded-xl border px-4 py-6 md:p-10 shadow bg-white"},xe={class:"text-center pb-5 uppercase font-semibold"},Ne=["src"],Ce=s("div",{class:"pt-5 pb-1 font-semibold"},"Description:",-1),Ee={class:"pb-5 pt-1"},Se=["href"],$e=s("p",{class:"text-md text-blue-500"},"Claim your own Capybara NFT today!",-1),Oe=["disabled"],Me={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},De=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Fe=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),ze=[De,Fe],Be={key:2},Le=s("p",{class:"pt-5"},"You can see the whole collection at OpenSea",-1),Ue=["href"];function We(e,t,n,o,a,i){const p=m("ProgressBar"),v=m("Alert"),E=m("Nav"),S=m("Footer");return r(),l(I,null,[y(p,{running:!!e.transactionRunning},null,8,["running"]),y(v,{ref:"alert"},null,512),s("div",ke,[y(E,W({network:e.network,address:e.address,appReady:e.appReady,validNetwork:e.validNetwork,expectedNetwork:e.expectedNetwork},{onSwitchChain:e.switchToValidChain,onConnectWallet:e.connectWallet}),null,16,["onSwitchChain","onConnectWallet"]),s("main",_e,[Ae,s("h2",Ie," Total collection size: "+c(e.collectionSize)+" items. ",1),e.token?(r(),l("div",Re,[s("div",xe,c(e.token.name),1),s("img",{class:"w-full rounded",src:e.token.image},null,8,Ne),Ce,s("div",Ee,c(e.token.description),1),s("a",{href:e.token.openSeaUrl,class:"text-blue-400 underline"},"See at OpenSea",8,Se)])):e.availableItemsLength&&e.availableItemsLength>0?(r(),l(I,{key:1},[s("p",null,"There are still "+c(e.availableItemsLength)+" items available.",1),$e,s("button",{type:"button",class:A(["inline-flex items-center justify-center py-2 px-10 my-4 w-full md:w-auto text-center border border-transparent text-base leading-6 font-medium rounded-md text-white bg-blue-600 hover:shadow-md hover:bg-blue-700 active:bg-blue-700 focus:border-blue-700 transition ease-in-out duration-150",{"cursor-not-allowed":e.claiming}]),disabled:e.claiming,onClick:t[0]||(t[0]=(...$)=>e.claim&&e.claim(...$))},[e.claiming?(r(),l("svg",Me,ze)):h("",!0),T(" "+c(e.claiming?"Claiming...":"Claim NFT"),1)],10,Oe)],64)):(r(),l("h3",Be,"All the collection items were claimed! :(")),Le,s("a",{class:"bg-green-500 hover:bg-green-600 px-10 py-2 my-4 rounded shadow hover:shadow-md font-semibold w-full focus:border-green-700 transition ease-in-out duration-150 md:w-auto justify-center inline-flex ml-1 text-base leading-6 font-medium rounded-md text-white leading-6 shadow-inner",href:e.collectionUrl}," View Collection ",8,Ue)]),y(S)])],64)}var Pe=w(Te,[["render",We]]);[P].forEach(e=>{j.add(e)});q(Pe).component("font-awesome-icon",V).mount("#app");
